import React, { useState, useMemo } from 'react';

export default function App() {
  const [vocabList, setVocabList] = useState([
    { chinese: 'Áà±', pinyin: '√†i', meaning: 'cinta' },
    { chinese: 'ÁîµËÑë', pinyin: 'di√†nn«éo', meaning: 'komputer' },
    { chinese: 'Â∑•‰Ωú', pinyin: 'g≈çngzu√≤', meaning: 'bekerja' },
    { chinese: 'Â≠¶‰π†', pinyin: 'xu√©x√≠', meaning: 'belajar' },
    { chinese: 'ÊúãÂèã', pinyin: 'p√©ngyou', meaning: 'teman' }
  ]);
  const [search, setSearch] = useState('');
  const [newWord, setNewWord] = useState({ chinese: '', pinyin: '', meaning: '' });

  const filtered = useMemo(() => {
    return vocabList
      .filter(v => (
        v.chinese.includes(search) ||
        v.pinyin.toLowerCase().includes(search.toLowerCase()) ||
        v.meaning.toLowerCase().includes(search.toLowerCase())
      ))
      .sort((a, b) => a.chinese.localeCompare(b.chinese, 'zh-Hans-CN'));
  }, [search, vocabList]);

  const addWord = (e) => {
    e.preventDefault();
    if (!newWord.chinese || !newWord.meaning) return;
    setVocabList([...vocabList, newWord]);
    setNewWord({ chinese: '', pinyin: '', meaning: '' });
  };

  return (
    <div className="min-h-screen bg-gradient-to-b from-blue-50 to-white text-slate-800 p-6">
      <div className="max-w-3xl mx-auto">
        <h1 className="text-3xl font-bold mb-4 text-center">üìò Kamus Mandarin Pribadi</h1>

        <input
          type="text"
          placeholder="Cari kata, pinyin, atau arti..."
          value={search}
          onChange={(e) => setSearch(e.target.value)}
          className="w-full mb-4 px-4 py-2 rounded-lg border border-slate-300"
        />

        <form onSubmit={addWord} className="flex flex-wrap gap-2 mb-6">
          <input
            type="text"
            placeholder="Ê±âÂ≠ó (Mandarin)"
            value={newWord.chinese}
            onChange={(e) => setNewWord({ ...newWord, chinese: e.target.value })}
            className="flex-1 px-3 py-2 border rounded-lg"
          />
          <input
            type="text"
            placeholder="Pinyin"
            value={newWord.pinyin}
            onChange={(e) => setNewWord({ ...newWord, pinyin: e.target.value })}
            className="flex-1 px-3 py-2 border rounded-lg"
          />
          <input
            type="text"
            placeholder="Arti (Indonesia)"
            value={newWord.meaning}
            onChange={(e) => setNewWord({ ...newWord, meaning: e.target.value })}
            className="flex-1 px-3 py-2 border rounded-lg"
          />
          <button type="submit" className="px-4 py-2 bg-blue-600 text-white rounded-lg">Tambah</button>
        </form>

        <div className="bg-white shadow rounded-lg overflow-hidden">
          <table className="min-w-full border-collapse">
            <thead className="bg-blue-100">
              <tr>
                <th className="border px-3 py-2 text-left">Ê±âÂ≠ó</th>
                <th className="border px-3 py-2 text-left">Pinyin</th>
                <th className="border px-3 py-2 text-left">Arti</th>
              </tr>
            </thead>
            <tbody>
              {filtered.map((v, i) => (
                <tr key={i} className="hover:bg-blue-50">
                  <td className="border px-3 py-2 font-semibold text-xl">{v.chinese}</td>
                  <td className="border px-3 py-2 italic text-slate-600">{v.pinyin}</td>
                  <td className="border px-3 py-2">{v.meaning}</td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>

        <footer className="mt-8 text-center text-sm text-slate-500">
          Dibuat dengan ‚ù§Ô∏è untuk belajar setiap hari.
        </footer>
      </div>
    </div>
  );
}
