<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>Mandarin Vocabulary</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: 40px auto;
      padding: 20px;
      line-height: 1.6;
    }
    #search {
      width: 100%;
      padding: 12px 16px;
      font-size: 16px;
      margin-bottom: 20px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    li {
      margin: 8px 0;
    }
  </style>
</head>

<body>
  <h1>我的汉语词汇表</h1>

  <input id="search" placeholder="搜索词语 / pinyin / arti..." />

  <ul id="vocab-list"></ul>

  <script>
    let vocabData = [];

    // Ambil data dari vocab.json
    fetch('vocab.json')
      .then(response => response.json())
      .then(vocab => {
        vocabData = vocab;
        renderList(vocabData);
      });

    // Fungsi untuk menampilkan daftar vocab
    function renderList(data) {
      const list = document.getElementById('vocab-list');
      list.innerHTML = "";
      data.forEach(item => {
        const li = document.createElement('li');
        li.textContent = `${item.chinese} — ${item.pinyin} — ${item.definition}`;
        list.appendChild(li);
      });
    }

    // Search bar event
    document.getElementById('search').addEventListener('input', function() {
      const keyword = this.value.toLowerCase();

      const filtered = vocabData.filter(item =>
        item.chinese.includes(keyword) ||
        item.pinyin.toLowerCase().includes(keyword) ||
        item.definition.toLowerCase().includes(keyword)
      );

      renderList(filtered);
    });
  </script>
<script>
async function loadVocab() {
  const res = await fetch('vocab.json');
  const data = await res.json();
  renderList(data);
  window.vocabData = data;
}

function renderList(data) {
  const list = document.getElementById('vocab-list');
  list.innerHTML = '';
  data.forEach(item => {
    const li = document.createElement('li');
    li.textContent = `${item.chinese} — ${item.pinyin} — ${item.translate}`;
    list.appendChild(li);
  });
}

async function addNewWord() {
  const chinese = prompt("汉字:");
  const pinyin = prompt("拼音:");
  const translate = prompt("Arti Indonesia:");

  if (!chinese || !pinyin || !translate) return;

  window.vocabData.push({
    chinese,
    pinyin,
    translate
  });

  renderList(window.vocabData);

  // upload manual: copy JSON ke vocab.json
  alert("✅ Kata ditambahkan!\n\nSilakan copy JSON ini dan update vocab.json secara manual di GitHub:\n\n" + JSON.stringify(window.vocabData, null, 2));
}

document.addEventListener("DOMContentLoaded", () => {
  loadVocab();

  const btn = document.createElement("button");
  btn.textContent = "Tambah Kata Baru";
  btn.style.fontSize = "16px";
  btn.style.margin = "10px 0";
  btn.onclick = addNewWord;

  document.body.prepend(btn);
});
</script>
</body>
</html>
