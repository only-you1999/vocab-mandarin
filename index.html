<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>Mandarin Vocabulary</title>
</head>
<body>
  <h1>我的汉语词汇表</h1>

  <ul id="vocab-list"></ul>

  <script>
    fetch('vocab.json')
      .then(response => response.json())
      .then(vocab => {
        const list = document.getElementById('vocab-list');
        vocab.forEach(item => {
          const li = document.createElement('li');
          li.textContent = `${item.chinese} — ${item.pinyin} — ${item.definition}`;
          list.appendChild(li);
        });
      });
  </script>
<script>
async function loadVocab() {
  const res = await fetch('vocab.json');
  const data = await res.json();
  renderList(data);
  window.vocabData = data;
}

function renderList(data) {
  const list = document.getElementById('vocab-list');
  list.innerHTML = '';
  data.forEach(item => {
    const li = document.createElement('li');
    li.textContent = `${item.chinese} — ${item.pinyin} — ${item.translate}`;
    list.appendChild(li);
  });
}

async function addNewWord() {
  const chinese = prompt("汉字:");
  const pinyin = prompt("拼音:");
  const translate = prompt("Arti Indonesia:");

  if (!chinese || !pinyin || !translate) return;

  window.vocabData.push({
    chinese,
    pinyin,
    translate
  });

  renderList(window.vocabData);

  // upload manual: copy JSON ke vocab.json
  alert("✅ Kata ditambahkan!\n\nSilakan copy JSON ini dan update vocab.json secara manual di GitHub:\n\n" + JSON.stringify(window.vocabData, null, 2));
}

document.addEventListener("DOMContentLoaded", () => {
  loadVocab();

  const btn = document.createElement("button");
  btn.textContent = "Tambah Kata Baru";
  btn.style.fontSize = "16px";
  btn.style.margin = "10px 0";
  btn.onclick = addNewWord;

  document.body.prepend(btn);
});
</script>
</body>
</html>
