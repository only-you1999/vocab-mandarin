<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>Mandarin Vocabulary</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: 40px auto;
      padding: 20px;
      line-height: 1.6;
    }
    #search {
      width: 100%;
      padding: 12px 16px;
      font-size: 16px;
      margin-bottom: 20px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    li {
      margin: 8px 0;
    }
  </style>
</head>

<body>
  <h1>我的汉语词汇表</h1>

  <input id="search" placeholder="搜索词语 / pinyin / arti..." />

  <ul id="vocab-list"></ul>

  <script>
    let vocabData = [];

    // Ambil data dari vocab.json
    fetch('vocab.json')
      .then(response => response.json())
      .then(vocab => {
        vocabData = vocab;
        renderList(vocabData);
      });

    // Fungsi untuk menampilkan daftar vocab
    function renderList(data) {
      const list = document.getElementById('vocab-list');
      list.innerHTML = "";
      data.forEach(item => {
        const li = document.createElement('li');
        li.textContent = `${item.chinese} — ${item.pinyin} — ${item.definition}`;
        list.appendChild(li);
      });
    }

    // Search bar event
    document.getElementById('search').addEventListener('input', function() {
      const keyword = this.value.toLowerCase();

      const filtered = vocabData.filter(item =>
        item.chinese.includes(keyword) ||
        item.pinyin.toLowerCase().includes(keyword) ||
        item.definition.toLowerCase().includes(keyword)
      );

      renderList(filtered);
    });
  </script>

document.addEventListener("DOMContentLoaded", function () {
    // Buat tombolnya
    const btn = document.createElement("button");
    btn.textContent = "Tambah Kata Baru";
    btn.style.padding = "8px 14px";
    btn.style.margin = "10px";
    btn.style.cursor = "pointer";

    // Masukkan tombol ke body atau container lain
    document.body.prepend(btn);

    // Aksi saat tombol diklik
    btn.addEventListener("click", function () {
        const kata = prompt("Masukkan kata baru:");
        if (!kata) return;

        // Ambil daftar lama dari localStorage
        const data = JSON.parse(localStorage.getItem("kosaKata") || "[]");

        // Tambah kata baru
        data.push(kata);

        // Simpan lagi
        localStorage.setItem("kosaKata", JSON.stringify(data));

        // Tampilkan ke halaman (kalau ada kontainer list)
        renderKosaKata(data);
    });

    // Render awal
    const saved = JSON.parse(localStorage.getItem("kosaKata") || "[]");
    renderKosaKata(saved);
});

// Fungsi render daftar
function renderKosaKata(list) {
    let container = document.getElementById("list-kata");
    if (!container) {
        // Kalau belum ada, buat otomatis
        container = document.createElement("div");
        container.id = "list-kata";
        container.style.margin = "20px";
        document.body.append(container);
    }

    container.innerHTML = "";
    list.forEach(k => {
        const item = document.createElement("div");
        item.textContent = "• " + k;
        container.appendChild(item);
    });
}
</body>
</html>
